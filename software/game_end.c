//*****************************************************************************
//
// Project: ECE544 Final Project
// Team: Sean Koppenhafer, Nathan Morelli, Jessica Bare
// File: game_end.c
//
// Implements the drawing of images on the LED panel informing the user
// of the outcome of the current game.  Specifically, "Game Over" is displayed
// after a snake came is lost and the winning player is displayed after 
// each pong game concludes.  
// 
// These images will be displayed until the user presses the start button.
//
//*****************************************************************************

#include "game_end.h"

 

typedef struct  {
    u8 y_cord;
    u8 x_cord;
    u8 color;
} game_end_image;


//*****************
// Game End Arrays
//*****************
game_end_image  game_over_image [] = {
{ 1 , 7 , 4 },
{ 1 , 8 , 4 },
{ 1 , 9 , 4 },
{ 1 , 12 , 4 },
{ 1 , 13 , 4 },
{ 1 , 17 , 4 },
{ 1 , 19 , 4 },
{ 1 , 22 , 4 },
{ 1 , 23 , 4 },
{ 1 , 24 , 4 },
{ 1 , 25 , 4 },
{ 2 , 6 , 4 },
{ 2 , 11 , 4 },
{ 2 , 14 , 4 },
{ 2 , 16 , 4 },
{ 2 , 18 , 4 },
{ 2 , 20 , 4 },
{ 2 , 22 , 4 },
{ 3 , 6 , 4 },
{ 3 , 11 , 4 },
{ 3 , 14 , 4 },
{ 3 , 16 , 4 },
{ 3 , 18 , 4 },
{ 3 , 20 , 4 },
{ 3 , 22 , 4 },
{ 3 , 23 , 4 },
{ 3 , 24 , 4 },
{ 4 , 6 , 4 },
{ 4 , 8 , 4 },
{ 4 , 9 , 4 },
{ 4 , 11 , 4 },
{ 4 , 12 , 4 },
{ 4 , 13 , 4 },
{ 4 , 14 , 4 },
{ 4 , 16 , 4 },
{ 4 , 18 , 4 },
{ 4 , 20 , 4 },
{ 4 , 22 , 4 },
{ 5 , 6 , 4 },
{ 5 , 9 , 4 },
{ 5 , 11 , 4 },
{ 5 , 14 , 4 },
{ 5 , 16 , 4 },
{ 5 , 18 , 4 },
{ 5 , 20 , 4 },
{ 5 , 22 , 4 },
{ 6 , 7 , 4 },
{ 6 , 8 , 4 },
{ 6 , 9 , 4 },
{ 6 , 11 , 4 },
{ 6 , 14 , 4 },
{ 6 , 16 , 4 },
{ 6 , 18 , 4 },
{ 6 , 20 , 4 },
{ 6 , 22 , 4 },
{ 6 , 23 , 4 },
{ 6 , 24 , 4 },
{ 6 , 25 , 4 },
{ 8 , 6 , 4 },
{ 8 , 7 , 4 },
{ 8 , 8 , 4 },
{ 8 , 9 , 4 },
{ 8 , 11 , 4 },
{ 8 , 15 , 4 },
{ 8 , 17 , 4 },
{ 8 , 18 , 4 },
{ 8 , 19 , 4 },
{ 8 , 20 , 4 },
{ 8 , 22 , 4 },
{ 8 , 23 , 4 },
{ 8 , 24 , 4 },
{ 8 , 25 , 4 },
{ 9 , 6 , 4 },
{ 9 , 9 , 4 },
{ 9 , 11 , 4 },
{ 9 , 15 , 4 },
{ 9 , 17 , 4 },
{ 9 , 22 , 4 },
{ 9 , 25 , 4 },
{ 10 , 6 , 4 },
{ 10 , 9 , 4 },
{ 10 , 11 , 4 },
{ 10 , 15 , 4 },
{ 10 , 17 , 4 },
{ 10 , 18 , 4 },
{ 10 , 19 , 4 },
{ 10 , 22 , 4 },
{ 10 , 23 , 4 },
{ 10 , 24 , 4 },
{ 10 , 25 , 4 },
{ 11 , 6 , 4 },
{ 11 , 9 , 4 },
{ 11 , 12 , 4 },
{ 11 , 14 , 4 },
{ 11 , 17 , 4 },
{ 11 , 22 , 4 },
{ 11 , 24 , 4 },
{ 12 , 6 , 4 },
{ 12 , 9 , 4 },
{ 12 , 12 , 4 },
{ 12 , 14 , 4 },
{ 12 , 17 , 4 },
{ 12 , 22 , 4 },
{ 12 , 25 , 4 },
{ 13 , 6 , 4 },
{ 13 , 7 , 4 },
{ 13 , 8 , 4 },
{ 13 , 9 , 4 },
{ 13 , 13 , 4 },
{ 13 , 17 , 4 },
{ 13 , 18 , 4 },
{ 13 , 19 , 4 },
{ 13 , 20 , 4 },
{ 13 , 22 , 4 },
{ 13 , 25 , 4 },
{ 0, 0, 8}
};
game_end_image  red_wins_image [] = {
{ 1 , 9 , 4 },
{ 1 , 10 , 4 },
{ 1 , 11 , 4 },
{ 1 , 12 , 4 },
{ 1 , 14 , 4 },
{ 1 , 15 , 4 },
{ 1 , 16 , 4 },
{ 1 , 17 , 4 },
{ 1 , 19 , 4 },
{ 1 , 20 , 4 },
{ 1 , 21 , 4 },
{ 2 , 9 , 4 },
{ 2 , 12 , 4 },
{ 2 , 14 , 4 },
{ 2 , 19 , 4 },
{ 2 , 22 , 4 },
{ 3 , 9 , 4 },
{ 3 , 10 , 4 },
{ 3 , 11 , 4 },
{ 3 , 12 , 4 },
{ 3 , 14 , 4 },
{ 3 , 15 , 4 },
{ 3 , 16 , 4 },
{ 3 , 19 , 4 },
{ 3 , 22 , 4 },
{ 4 , 9 , 4 },
{ 4 , 11 , 4 },
{ 4 , 14 , 4 },
{ 4 , 19 , 4 },
{ 4 , 22 , 4 },
{ 5 , 9 , 4 },
{ 5 , 12 , 4 },
{ 5 , 14 , 4 },
{ 5 , 19 , 4 },
{ 5 , 22 , 4 },
{ 6 , 9 , 4 },
{ 6 , 12 , 4 },
{ 6 , 14 , 4 },
{ 6 , 15 , 4 },
{ 6 , 16 , 4 },
{ 6 , 17 , 4 },
{ 6 , 19 , 4 },
{ 6 , 20 , 4 },
{ 6 , 21 , 4 },
{ 8 , 5 , 2 },
{ 8 , 7 , 2 },
{ 8 , 9 , 2 },
{ 8 , 11 , 5 },
{ 8 , 12 , 5 },
{ 8 , 13 , 5 },
{ 8 , 15 , 6 },
{ 8 , 19 , 6 },
{ 8 , 21 , 3 },
{ 8 , 22 , 3 },
{ 8 , 23 , 3 },
{ 8 , 24 , 3 },
{ 8 , 26 , 7 },
{ 9 , 5 , 2 },
{ 9 , 7 , 2 },
{ 9 , 9 , 2 },
{ 9 , 12 , 5 },
{ 9 , 15 , 6 },
{ 9 , 16 , 6 },
{ 9 , 19 , 6 },
{ 9 , 21 , 3 },
{ 9 , 26 , 7 },
{ 10 , 5 , 2 },
{ 10 , 7 , 2 },
{ 10 , 9 , 2 },
{ 10 , 12 , 5 },
{ 10 , 15 , 6 },
{ 10 , 17 , 6 },
{ 10 , 19 , 6 },
{ 10 , 22 , 3 },
{ 10 , 23 , 3 },
{ 10 , 26 , 7 },
{ 11 , 5 , 2 },
{ 11 , 7 , 2 },
{ 11 , 9 , 2 },
{ 11 , 12 , 5 },
{ 11 , 15 , 6 },
{ 11 , 18 , 6 },
{ 11 , 19 , 6 },
{ 11 , 24 , 3 },
{ 11 , 26 , 7 },
{ 12 , 5 , 2 },
{ 12 , 7 , 2 },
{ 12 , 9 , 2 },
{ 12 , 12 , 5 },
{ 12 , 15 , 6 },
{ 12 , 19 , 6 },
{ 12 , 24 , 3 },
{ 13 , 6 , 2 },
{ 13 , 8 , 2 },
{ 13 , 11 , 5 },
{ 13 , 12 , 5 },
{ 13 , 13 , 5 },
{ 13 , 15 , 6 },
{ 13 , 19 , 6 },
{ 13 , 21 , 3 },
{ 13 , 22 , 3 },
{ 13 , 23 , 3 },
{ 13 , 26 , 7 },
{ 0, 0, 8}
};
game_end_image  blue_wins_image [] = {
{ 1 , 6 , 1 },
{ 1 , 7 , 1 },
{ 1 , 8 , 1 },
{ 1 , 11 , 1 },
{ 1 , 16 , 1 },
{ 1 , 19 , 1 },
{ 1 , 21 , 1 },
{ 1 , 22 , 1 },
{ 1 , 23 , 1 },
{ 1 , 24 , 1 },
{ 2 , 6 , 1 },
{ 2 , 9 , 1 },
{ 2 , 11 , 1 },
{ 2 , 16 , 1 },
{ 2 , 19 , 1 },
{ 2 , 21 , 1 },
{ 3 , 6 , 1 },
{ 3 , 7 , 1 },
{ 3 , 8 , 1 },
{ 3 , 11 , 1 },
{ 3 , 16 , 1 },
{ 3 , 19 , 1 },
{ 3 , 21 , 1 },
{ 3 , 22 , 1 },
{ 3 , 23 , 1 },
{ 4 , 6 , 1 },
{ 4 , 9 , 1 },
{ 4 , 11 , 1 },
{ 4 , 16 , 1 },
{ 4 , 19 , 1 },
{ 4 , 21 , 1 },
{ 5 , 6 , 1 },
{ 5 , 9 , 1 },
{ 5 , 11 , 1 },
{ 5 , 16 , 1 },
{ 5 , 19 , 1 },
{ 5 , 21 , 1 },
{ 6 , 6 , 1 },
{ 6 , 7 , 1 },
{ 6 , 8 , 1 },
{ 6 , 11 , 1 },
{ 6 , 12 , 1 },
{ 6 , 13 , 1 },
{ 6 , 14 , 1 },
{ 6 , 16 , 1 },
{ 6 , 17 , 1 },
{ 6 , 18 , 1 },
{ 6 , 19 , 1 },
{ 6 , 21 , 1 },
{ 6 , 22 , 1 },
{ 6 , 23 , 1 },
{ 6 , 24 , 1 },
{ 8 , 5 , 2 },
{ 8 , 7 , 2 },
{ 8 , 9 , 2 },
{ 8 , 11 , 5 },
{ 8 , 12 , 5 },
{ 8 , 13 , 5 },
{ 8 , 15 , 6 },
{ 8 , 19 , 6 },
{ 8 , 21 , 3 },
{ 8 , 22 , 3 },
{ 8 , 23 , 3 },
{ 8 , 24 , 3 },
{ 8 , 26 , 7 },
{ 9 , 5 , 2 },
{ 9 , 7 , 2 },
{ 9 , 9 , 2 },
{ 9 , 12 , 5 },
{ 9 , 15 , 6 },
{ 9 , 16 , 6 },
{ 9 , 19 , 6 },
{ 9 , 21 , 3 },
{ 9 , 26 , 7 },
{ 10 , 5 , 2 },
{ 10 , 7 , 2 },
{ 10 , 9 , 2 },
{ 10 , 12 , 5 },
{ 10 , 15 , 6 },
{ 10 , 17 , 6 },
{ 10 , 19 , 6 },
{ 10 , 22 , 3 },
{ 10 , 23 , 3 },
{ 10 , 26 , 7 },
{ 11 , 5 , 2 },
{ 11 , 7 , 2 },
{ 11 , 9 , 2 },
{ 11 , 12 , 5 },
{ 11 , 15 , 6 },
{ 11 , 18 , 6 },
{ 11 , 19 , 6 },
{ 11 , 24 , 3 },
{ 11 , 26 , 7 },
{ 12 , 5 , 2 },
{ 12 , 7 , 2 },
{ 12 , 9 , 2 },
{ 12 , 12 , 5 },
{ 12 , 15 , 6 },
{ 12 , 19 , 6 },
{ 12 , 24 , 3 },
{ 13 , 6 , 2 },
{ 13 , 8 , 2 },
{ 13 , 11 , 5 },
{ 13 , 12 , 5 },
{ 13 , 13 , 5 },
{ 13 , 15 , 6 },
{ 13 , 19 , 6 },
{ 13 , 21 , 3 },
{ 13 , 22 , 3 },
{ 13 , 23 , 3 },
{ 13 , 26 , 7 },
{ 0, 0, 8}
};


//*****************************************************************************
// Draws game end image on the LED panel
// 
// The image number is passed to this function by the main loop.
//*****************************************************************************
void draw_game_end(u8 image) {
  int i = 0;
  game_end_image* current_image;
  buttons buttons_pressed;
  bool hit_start = false;
  
  // Check the current image number and point the current_image pointer 
  // to the corresponding image array
  if(image == GAME_OVER_NUM) current_image = game_over_image;
  else if(image == BLUE_WINS_NUM) current_image = blue_wins_image;
  else if(image == RED_WINS_NUM) current_image = red_wins_image;
  
  // Loop through each element in the array until you read the terminating color value
  while(current_image[i].color != 8) {
    LEDPANEL_writepixel(current_image[i].x_cord,
                        current_image[i].y_cord,
                        current_image[i].color);

    i++;
  }

  // After array is written to LED memory send the update signal
  LEDPANEL_updatepanel();
  
  //Wait until the user presses the start button
  while(!hit_start) {

    buttons_pressed = read_controller(CONTROLLER1_DEV_ID);
    
    if(buttons_pressed.start) hit_start = true;
      
  }  
}

